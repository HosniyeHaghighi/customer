<template>
  <div dir="rtl" class="w-full bg-[#8677c2] pt-[4.25rem] ps-[4.25rem] pe-[2.75rem] pb-12 min-h-screen">
    <main class="flex w-full flex-col bg-white rounded-3xl">

      <pandora-header class="p-6">
        <template #start>
          <div class="flex flex-col gap-y-1">
            <PBreadcrumb>
              <span>کاربران</span>
              <span>کاربر ۴۵۶۷۵</span>
            </PBreadcrumb>
            <span class="p-text-primary-60 font-medium">جزئیات پرونده و مشخصات کاربری</span>
          </div>
        </template>
        <template #action>
          <PButton type="secondary" outline :start-icon="closeCircleBoldDuotone">احراز هویت نشده</PButton>
          <PMenu v-model="operationMenu" :items="menuItemsWithChildren">
            <template #trigger="{ isOpen }">
              <PButton fill type="secondary">
                عملیات
                <template #end>
                  <PSvg :svg="altArrowDownOutline" class="transform transition-transform duration-300" :class="{ 'rotate-180': isOpen }" />
                </template>
              </PButton>
            </template>
          </PMenu>
          <PMenu v-model="moreMenu" :items="menuItemsWithChildren" />
        </template>
      </pandora-header>


      <div class="flex w-full gap-x-3 px-4">

        <div class="flex flex-col w-[17.75rem] border-t border-x rounded-t-2xl p-border-primary-8">
          <pandora-header
            :badge="{ type: 'accent', icon: userOutline }"
            title="محمد عرفان وصال‌طلب"
            subtitle="۰۹۱۲۳۴۵۶۷۸۹"
          />
          <div class="flex flex-col w-full gap-1 mt-2 px-5">
            <PSidebarItem
              v-for="(item, sIdx) in sidebarItems"
              :key="`sidebar-${sIdx}`"
              :selected="sIdx == 0"
              :title="item.title"
              :startIcon="item.icon"
              mode="inside"
            />
          </div>
        </div>


        <div class="flex flex-col flex-grow gap-y-4 pb-4">

          <IdentityInfo />
          
          <div class="flex w-full gap-x-3">

            <ContactInfo />
            
            <GeographicInfo />
          </div>
        </div>
      </div>
    </main>
  </div>
</template>

<script setup lang="ts">
import './main.scss'
import PandoraHeader from './components/PandoraHeader.vue'
import PForm from './components/IdentityInfo.vue'
import { PBreadcrumb, PSidebarItem, PDropdown, PTextInput } from 'pandora-design-system'
import { PButton, PMenu, PSvg } from 'pandora-design-system'
import closeCircleBoldDuotone from 'pandora-icons/closeCircleBoldDuotone'
import { computed, ref } from 'vue'
import infoCircleOutline from 'pandora-icons/infoCircleOutline'
import altArrowDownOutline from 'pandora-icons/altArrowDownOutline'
import userIdOutline from 'pandora-icons/userIdOutline'
import userOutline from 'pandora-icons/userOutline'
import documentTextOutline from 'pandora-icons/documentTextOutline'
import wadOfMoneyOutline from 'pandora-icons/wadOfMoneyOutline'
import databaseOutline from 'pandora-icons/databaseOutline'
import document2Outline from 'pandora-icons/document2Outline'
import IdentityInfo from './components/IdentityInfo.vue';
import ContactInfo from './components/ContactInfo.vue';
import GeographicInfo from './components/GeographicInfo.vue';

const operationMenu = ref(false)
const moreMenu = ref(false)

const menuItemsWithChildren = ref<any[]>([
  {
    title: 'برچسب',
    startIcon: infoCircleOutline,

    children: [
      {
        title: 'فرزند ۱-۱',
        startIcon: infoCircleOutline,
      },
      {
        title: 'فرزند ۱-۲',
        startIcon: infoCircleOutline,
        children: [
          { title: 'فرزند ۳-۱', startIcon: infoCircleOutline },
          {
            title: 'فرزند ۳-۲',
            startIcon: infoCircleOutline,
            children: [
              { title: 'فرزند ۳-۱', startIcon: infoCircleOutline },
              { title: 'فرزند ۳-۲', startIcon: infoCircleOutline },
            ],
          },
        ],
      },
    ],
  },
])

const sidebarItems = [
  {
    title: 'عنوان',
    icon: userOutline,
  },
  {
    title: 'عنوان',
    icon: documentTextOutline,
  },
  {
    title: 'عنوان',
    icon: wadOfMoneyOutline,
  },
  {
    title: 'عنوان',
    icon: databaseOutline,
  },
  {
    title: 'عنوان',
    icon: document2Outline,
  },
]


</script>

<style scoped></style>
